version: "3.9"

# ===============================
# Driver Service Docker Compose
# ===============================
# 
# ‚ö†Ô∏è DATABASE INFRASTRUCTURE CHANGE:
# PostgreSQL database is now managed centrally in infrastructure/data/
# You must start the data infrastructure first:
#   cd ../../infrastructure/data && docker-compose up -d
#
# Database Connection:
# - Uses postgres-driver from fleet-data-network
# - Local dev: localhost:6433
# - Docker: postgres-driver:5432
#
# Database Initialization:
# - Schema: Created automatically via Hibernate (ddl-auto: update)
# - Data: Managed by the application via Flyway migrations
#
# Ports:
# - Driver Service: localhost:6001
#
# üìö Documentation:
# - Database Setup: See ../../infrastructure/data/README.md
# - pgAdmin Access: http://localhost:5050 (centralized instance)
# - API Documentation: See README.md for service endpoints and usage

services:
  driver-service:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: driver-service
    ports:
      - "6001:6001"
    environment:
      SPRING_PROFILES_ACTIVE: docker
      DB_HOST: postgres-driver
      DB_PORT: 5432
      DB_NAME: driver_db
      DB_USERNAME: postgres
      DB_PASSWORD: postgres
      SERVER_PORT: 6001
    restart: always
    networks:
      - fleet-data-network

networks:
  fleet-data-network:
    external: true

